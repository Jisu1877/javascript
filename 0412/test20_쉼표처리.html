<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test20.html</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        'use strict';
        function commaInput() {
            let num = myForm.num.value;
            if(num == "" || isNaN(num)) {
                alert("숫자를 입력하세요.");
                myForm.num.select();
                myForm.num.focus();
                return false;
            }

            //정확한 숫자를 입력하였다면 콤마함수를 호출한다.
            document.getElementById("demo").innerHTML = comma(num);
        }

        // numPoint위치:0123456
        // 쉼표표시 함수(1234567 => 1,234,567)
        function comma(num) {
            let numLen, numPoint, numStr;
            
            numLen = num.length;
            // numStr = num + "";
            numPoint = numLen % 3;

            numStr = num.substring(0,numPoint); //숫자가 3자리이면 numPoint가 0이기 때문에 numStr 에는 ""가 들어간다.
            while(numPoint < numLen) {
                if(numStr != "") {
                    numStr += ",";
                }
                numStr += num.substring(numPoint, numPoint+3);
                numPoint += 3;
            }
            return numStr;
        }

        function commaInput2() {
            let num = myForm.num.value;
            if(num == "" || isNaN(num)) {
                alert("숫자를 입력하세요.");
                myForm.num.select();
                myForm.num.focus();
                return false;
            }

            //정확한 숫자를 입력하였다면 콤마함수를 호출한다.
            document.getElementById("demo").innerHTML = numberWithCommas(num);
        }

        // 숫자 3자리마다 콤마표시하기
        function numberWithCommas(num) { 
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // 숫자만 추출하기(콤마제거하기) 
        function commaOutput() {
            let str = document.getElementById("demo").innerText; //value로 값을 가져오는 것은 form 태그일때만!
            document.getElementById("demo2").innerHTML = str.replace(/[^\d]+/g, "");
        }
    </script>
</head>
<body>
    <p><br/></p>
    <div class="container">
        <h2>쉼표 처리...</h2>
        <form name="myForm">
            <div class="form-group">
                <label for="num">숫자</label> 
                <input type="text" name="num" class="form-control m-1" autofocus/>
            </div>
            <div class="form-group">
                <input type="button" value="쉼표넣기" onclick="commaInput()" class="form-control m-1"/>
                <input type="button" value="정규식 쉼표넣기" onclick="commaInput2()" class="form-control m-1"/>
                <input type="button" value="정규식 쉼표빼기" onclick="commaOutput()" class="form-control m-1"/>
                <input type="button" value="클리어" onclick="location.reload()" class="form-control m-1"/>
            </div>
        </form>
        <br/>
        <h2>
            <div id="demo"></div>
            <div id="demo2"></div>
        </h2>
    </div>
</body>
</html>